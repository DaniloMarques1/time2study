!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);const n="https://danilomarques.pythonanywhere.com";!function(){const e=localStorage.getItem("token");if("undefined"!=e&&null!=e){const t=new Headers;t.append("Authorization","Bearer "+e),fetch(`${n}/user`,{method:"GET",headers:t}).then(e=>{e.ok||(window.location.href="logar.html")})}else window.location.href="logar.html"}(),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#sair"),t=document.querySelector("#erro");document.querySelector("#loaderContent").innerHTML='\n\t\t<div id="modalLoader" class="modal" tabindex="-1" role="dialog">\n\t\t    <div class="modal-dialog" role="document">\n\t\t      <div class="modal-content">\n\t\t        <div class="modal-header">\n\t\t          <h5 class="modal-title">Carregando...</h5>\n\t\t        </div>\n\t\t        <div class="modal-body-loader">\n\t\t          <div class=\'loader\' id=\'loader\'></div>  \n\t\t        </div>\n\t\t      </div>\n\t\t    </div>\n  \t\t</div>\n\t',$("#modalLoader").modal("show"),e.addEventListener("click",()=>{$("#modalLoader").modal("show"),localStorage.clear(),window.location.href="logar.html"});const o=document.querySelector("#add_task"),r=()=>{const e=document.querySelector("#tasks"),o=new Headers;o.append("Authorization","Bearer "+localStorage.getItem("token")),fetch(`${n}/tasks`,{headers:o}).then(e=>{if($("#modalLoader").modal("hide"),e.ok)return e.json();window.location.href="logar.html"}).then(o=>{const n=o.tasks;let r="";for(const e of n)r+=d(e);e.innerHTML=r,Array.from(document.querySelectorAll(".play_button")).map(e=>{e.addEventListener("click",()=>{const o=e.getAttribute("data-id"),r=a(n,o);r?g(r):(t.innerHTML=((e="error")=>(e=>`<div id="myModalError" class="modal" tabindex="-1" role="dialog">\n    <div class="modal-dialog" role="document">\n      <div class="modal-content">\n        <div class="modal-header">\n          <h5 class="modal-title">ERRO</h5>\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n            <span aria-hidden="true">&times;</span>\n          </button>\n        </div>\n        <div class="modal-body">\n          <p class='text-center'>${e}.</p>\n        </div>\n        <div class="modal-footer">\n          <button type="button" class="btn btn-danger" data-dismiss="modal">Sair</button>\n        </div>\n      </div>\n    </div>\n  </div>`)(e))("unnexpected error"),$("#myModalError").modal("show"))})})})};r();const a=(e,t)=>{for(const o of e)if(o.id_task==t)return o},d=e=>`\n\t\t\t<div class='task-item'>\n\t\t    \t<span> ${e.title} <span class="play_button oi oi-media-play" data-id='${e.id_task}'></span></span>\n\t\t    </div>\n\t\t`;o.addEventListener("submit",e=>{e.preventDefault(),(()=>{var e=new Headers;e.append("Authorization","Bearer "+localStorage.getItem("token")),$("#modalLoader").modal("show"),fetch(`${n}/user`,{method:"GET",headers:e}).then(e=>{if($("#modalLoader").modal("hide"),e.ok)return e.json();window.location.href="logar.html"}).then(e=>{const t=document.querySelector("#task_title"),o=document.querySelector("#task_description"),a=document.querySelector("#task_pomodoro"),d={title:t.value,description:o.value,pomodoro_total:a.value,id_user:e.id_user},i=new Headers;i.append("Content-Type","application/json"),fetch(`${n}/addTask`,{method:"POST",body:JSON.stringify(d),headers:i}).then(e=>{e.ok&&(r(),$("#myModal").modal("hide"),l(t,o,a))})})})()});const l=(...e)=>{e.map(e=>e.value="")},i=document.querySelector("#minutes_seconds_value"),s=document.querySelector("#startTimer"),c=document.querySelector("#pauseTimer"),u=document.querySelector("#resetTimer"),m=document.querySelector("#task_values");document.querySelector("#current_pomodoros");let v=void 0,p=1,h=0,f=void 0,y=!1,b=!1;const g=e=>{v=e.id_task;const t=S(e),o=document.querySelector("#task_title_modal");i.innerHTML=k(p,h),o.innerHTML=e.title,m.innerHTML=t,$("#timerModal").modal("show")},S=e=>`\n\t\t\t<div>\n\t\t\t\t<h5 class='text-center'>\n\t\t\t\t\t${e.current_pomodoros}</span>/${e.pomodoros_total}\n\t\t\t\t</h5>\n\t\t\t\t<h5>${e.description}</h5>\n\t\t\t</div>\n\n\t\t`,k=(e,t)=>`${_(e)}:${_(t)}`,_=e=>((e=e.toString()).length<2&&(e="0"+e),e);s.addEventListener("click",()=>{f=y?setInterval(w,100):setInterval(L,100)});const L=()=>{if(--h<=-1)if(0==p&&-1==h){h=0,new Audio("time2study/audio/clock.mp3").play();const e=new Headers;e.append("Authorization","Bearer "+localStorage.getItem("token")),fetch(`${n}/updateTask/${v}`,{headers:e}).then(e=>{p=5,i.innerHTML=k(p,h),e.json().then(e=>{console.log(e),0==e.active&&(b=!0),r();const t=S(e);m.innerHTML=t})}),y=!0,clearInterval(f)}else h=59,p--;i.innerHTML=k(p,h)},w=()=>{--h<=-1&&(0==p&&-1==h?(clearInterval(f),console.log("Acabou"),p=1,h=0,y=!1,b&&($("#timerModal").modal("hide"),b=!1)):(h=59,p--)),i.innerHTML=k(p,h)};document.querySelector("#close_timer").addEventListener("click",()=>{p=1,h=0,clearInterval(f),b=!1,y=!1}),u.addEventListener("click",()=>{p=y?5:1,h=0,clearInterval(f),i.innerHTML=k(p,h)}),c.addEventListener("click",()=>{clearInterval(f)})})}]);